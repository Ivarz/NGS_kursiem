\documentclass{article}
\usepackage{framed}
\usepackage{fontspec}
\usepackage{hhline}
\usepackage{hyperref}
\newcommand{\git}{\texttt{git}}
\newcommand{\Git}{\texttt{Git}}
\newcommand{\IonTorrent}{\textit{IonTorrent}}
\newcommand{\binDir}{binaries}
\newcommand{\fbinDir}{\textasciitile/\binDir}
\newcommand{\progDir}{programs}
\newcommand{\workDir}{ngs\_work}
\newcommand{\denovoDir}{denovo}
\newcommand{\reseqDir}{reseq}
\newcommand{\refSeq}{chr\_merged.fa}
\newcommand{\refDir}{ref}
\newcommand{\refFullDir}{\texttt{\textasciitile/\workDir/\reseqDir/ref}}
\newcommand{\refRel}{\texttt{ref/\refSeq}}
\newcommand{\denovo}{\textit{de-novo}}
\newcommand{\denovoReads}{denovo\_reads}
\newcommand{\dataDir}{data/day1}
\newcommand{\mapReads}{reseq\_reads}
\newcommand{\snpEffData}{snpEffData}
\newcommand{\bash}{\textit{Bash}}
\newcommand{\pipename}{snp\_pipeline.sh}
%Reference genome indexing
\newcommand{\refindex}[1]{\texttt{tmap index -f #1}}
%map reads
\newcommand{\tmap}[3]{\texttt{tmap map3 -f #1 \textbackslash \\
  \indent -r #2 \textbackslash \\
  \indent -i fastq \textbackslash \\
  \indent -o 2 \textbackslash \\
  \indent -s #3
  }
}
\newcommand{\tmapWithRG}[3]{\texttt{tmap map3 -f #1 \textbackslash \\
  \indent -r #2 \textbackslash \\
  \indent -R "@RG\textbackslash tID:SomeID\textbackslash tSM:Sample1" \textbackslash \\
  \indent -i fastq \textbackslash \\
  \indent -o 2 \textbackslash \\
  \indent -s #3
  }
}
\newcommand{\sortbam}[2]{\texttt{samtools sort #1 #2}}

\newcommand{\reheader}[2]{\texttt{samtools view -H #1 \textbackslash \\
  \indent | sed 's/SM:NOSM/SM:Sample1/' \textbackslash \\
  \indent | samtools reheader - #1 \textbackslash \\
  \indent > #2
  }
}
\newcommand{\samtoolssnp}[3]{\texttt{samtools mpileup -uf #1 \textbackslash \\
  \indent #2 \textbackslash \\
  \indent | bcftools call -mv --skip-variants indels \textbackslash \\
%  \indent | vcfutils.pl varFilter > #3
  \indent > #3
  }
}

\newcommand{\snpEff}[2]{\texttt{java -jar \textasciitilde/programs/snpEff/snpEff.jar \textbackslash \\
  \indent ann \textbackslash \\
  \indent -c \textasciitilde/programs/snpEff/snpEff.config \textbackslash \\
  \indent GRCh38.76 \textbackslash \\
  \indent #1 \textbackslash \\
  \indent > #2 
  }
}

\newcommand{\SnpSiftFilter}[2]{\texttt{java -jar \textasciitilde/programs/snpEff/SnpSift.jar \textbackslash \\
  \indent filter \textbackslash \\
  \indent -f #1 \textbackslash \\
  \indent "ANN[*].EFFECT = 'missense\_variant' || ANN[*].EFFECT = 'stop\_gained'"
  \indent > #2
  }
}
%pipeline:
%\refindex{\refRel}
%\tmap{\refRel}{\mapReads.fastq}{\mapReads\_mapped.bam}\\
%\tmapWithRG{\refRel}{\mapReads.fastq}{\mapReads\_mapped.reheaded.bam}\\
%\reheader{\mapReads\_mapped.bam}{\mapReads\_mapped.reheaded.bam}\\
%\texttt{\samtoolssnp{\refRel}{\mapReads\_mapped.reheaded.sorted.bam}{\mapReads.bcftools\_snps.vcf}}\\
%\snpEff{\mapReads.bcftools\_snps.vcf}{\mapReads.bcftools\_snps.annotated.vcf}\\
%\SnpSiftFilter{\mapReads.bcftools\_snps.annotated.vcf}{\mapReads.bcftools\_snps.annotated.nonsyn\_stop.vcf}\\
\begin{document}
%\input{title/title.tex}
  \input{linux/linux_basics.tex}
  \input{linux/env_setup.tex}
  \input{denovo/denovo_uzskate.tex}
  \input{snp_calling/snp_calling_uzskate.tex}
  \input{snp_calling/pipeline_building.tex}
\end{document}
